"use strict";(()=>{var e={};e.id=764,e.ids=[764],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6794:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>g,originalPathname:()=>v,patchFetch:()=>f,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>h,staticGenerationAsyncStorage:()=>l,staticGenerationBailout:()=>y});var o={};t.r(o),t.d(o,{GET:()=>m,POST:()=>u});var n=t(5419),a=t(9108),i=t(9678),s=t(8070);let p={openai:{endpoint:"https://api.openai.com/v1/chat/completions",model:"gpt-3.5-turbo",maxTokens:150},groq:{endpoint:"https://api.groq.com/openai/v1/chat/completions",model:"mixtral-8x7b-32768",maxTokens:150},anthropic:{endpoint:"https://api.anthropic.com/v1/messages",model:"claude-3-haiku-20240307",maxTokens:150}};async function u(e){try{let r,t,o;let n=await e.json();if(!n.text||!n.apiKey||!n.provider)return s.Z.json({error:"Missing required fields: text, apiKey, and provider are required"},{status:400});if(!["openai","groq","anthropic"].includes(n.provider))return s.Z.json({error:'Invalid provider. Must be "openai", "groq", or "anthropic"'},{status:400});let a=p[n.provider],i=`You are a technical summarizer. Summarize the given GitHub repository information in exactly 3 sentences. Focus on:
1. What the repository does (main purpose/functionality)
2. Key features or technologies used
3. Target use case or audience

Keep it concise, technical, and informative.`,u=`Please summarize this GitHub repository:

${n.text}`;"anthropic"===n.provider?(r={model:a.model,max_tokens:a.maxTokens,messages:[{role:"user",content:`${i}

${u}`}]},t={"Content-Type":"application/json","x-api-key":n.apiKey,"anthropic-version":"2023-06-01"}):(r={model:a.model,messages:[{role:"system",content:i},{role:"user",content:u}],max_tokens:a.maxTokens,temperature:.3,top_p:1,frequency_penalty:0,presence_penalty:0},t={"Content-Type":"application/json",Authorization:`Bearer ${n.apiKey}`,..."groq"===n.provider&&{"User-Agent":"AI-News-Aggregator/1.0"}}),console.log(`Making ${n.provider} API request for summarization`);let m=await fetch(a.endpoint,{method:"POST",headers:t,body:JSON.stringify(r)});if(!m.ok){let e=await m.text();if(console.error(`${n.provider} API error:`,m.status,e),401===m.status)return s.Z.json({error:"Invalid API key. Please check your credentials."},{status:401});if(429===m.status)return s.Z.json({error:"Rate limit exceeded. Please try again later."},{status:429});return s.Z.json({error:`${n.provider} API error: ${m.status}`},{status:500})}let c=await m.json();if(!(o="anthropic"===n.provider?c.content?.[0]?.text?.trim():c.choices?.[0]?.message?.content?.trim()))throw Error("No summary generated by the AI model");let d=o.split(/[.!?]+/).filter(e=>e.trim().length>0).length;d<2&&console.warn(`Summary only contains ${d} sentences, expected 3`),console.log(`Successfully generated summary using ${n.provider}`);let l={summary:o,provider:n.provider,timestamp:new Date().toISOString()};return s.Z.json(l)}catch(e){return console.error("Error in summarize API:",e),s.Z.json({error:e instanceof Error?e.message:"Failed to generate summary",provider:"unknown",timestamp:new Date().toISOString()},{status:500})}}async function m(){return s.Z.json({message:"AI Summarization API",supported_providers:["openai","groq","anthropic"],method:"POST",required_fields:["text","apiKey","provider"],description:"Generates 3-sentence summaries of repository content using AI"})}let c=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/summarize/route",pathname:"/api/summarize",filename:"route",bundlePath:"app/api/summarize/route"},resolvedPagePath:"/Users/yarinshushan/Desktop/Afeka<Shushan>HW1/pr3/app/api/summarize/route.js",nextConfigOutput:"",userland:o}),{requestAsyncStorage:d,staticGenerationAsyncStorage:l,serverHooks:h,headerHooks:g,staticGenerationBailout:y}=c,v="/api/summarize/route";function f(){return(0,i.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:l})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[638,206],()=>t(6794));module.exports=o})();